{% extends "base.html" %}
{% block content %}
<h2>Home</h2>
<br>
<div class="card" style="width: 25rem;">
  <h5 class="card-header">
    All Users
  </h5>
  <ul class="list-group list-group-flush">
      {% if users %}
        {% for user in users %}
                <div class="card list-group-item">
                    <div class="card-body">
                        {{ user.username }}
                      <div class="float-right card-link">
                          {% if user not in sent_requests_to_users and user not in received_requests_from_users %}
                              <a href="{% url 'send_request' user.id %}">
                                <button class="btn">Send request</button>
                              </a>
                          {% elif user not in accepted_sent_requests_to_users and user not in received_requests_from_users %}
                              <a href="#">
                                  <button class="btn" disabled>Request sent</button>
                              </a>
                          {% elif user in received_requests_from_users and user not in accepted_received_requests_from_users %}
                              <a href="{% url 'accept_request' user.id request.user.id %}">
                                  <button class="btn">Accept request</button>
                              </a>
                          {% else %}
                              <a href="{% url 'chat' user.id %}">
                                  <button class="btn">Chat</button>
                              </a>
                          {% endif %}
                      </div>
                    </div>
                </div>
        {% endfor %}
      {% endif %}
  </ul>
</div>
{% endblock content %}